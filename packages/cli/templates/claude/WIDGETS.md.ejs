# GTKX Widget Reference

## Common Props (All Widgets)

| Prop | Type | Description |
|------|------|-------------|
| `hexpand` / `vexpand` | boolean | Expand to fill available space |
| `halign` / `valign` | `Gtk.Align.START \| CENTER \| END \| FILL` | Alignment |
| `marginStart/End/Top/Bottom` | number | Margins in pixels |
| `sensitive` | boolean | Enabled/disabled state |
| `visible` | boolean | Visibility |
| `cssClasses` | string[] | CSS classes for styling |
| `widthRequest` / `heightRequest` | number | Minimum size |

---

## Containers

### GtkBox
Linear layout (horizontal or vertical).

```tsx
<GtkBox orientation={Gtk.Orientation.VERTICAL} spacing={12} homogeneous={false}>
    {children}
</GtkBox>
```

### GtkGrid
2D grid with explicit positioning using `GridChild`.

```tsx
<GtkGrid rowSpacing={8} columnSpacing={12}>
    <GridChild column={0} row={0}><GtkLabel label="Name:" /></GridChild>
    <GridChild column={1} row={0}><GtkEntry hexpand /></GridChild>
    <GridChild column={0} row={1} columnSpan={2}><GtkButton label="Submit" /></GridChild>
</GtkGrid>
```

**GridChild props:** `column`, `row`, `columnSpan`, `rowSpan`

### GtkStack
Page container, shows one child at a time.

```tsx
<GtkStack visibleChildName="page1" transitionType={Gtk.StackTransitionType.SLIDE_LEFT_RIGHT}>
    <StackPage name="page1" title="First" iconName="document-new">
        <Content1 />
    </StackPage>
    <StackPage name="page2" title="Second">
        <Content2 />
    </StackPage>
</GtkStack>
```

**StackPage props:** `name` (required), `title`, `iconName`, `needsAttention`, `badgeNumber` (AdwViewStack only)

### GtkNotebook
Tabbed container with visible tabs.

```tsx
<GtkNotebook>
    <Notebook.Page label="Tab 1"><Content1 /></Notebook.Page>
    <Notebook.Page label="Tab 2"><Content2 /></Notebook.Page>
</GtkNotebook>
```

Custom tab widget:
```tsx
<Notebook.Page>
    <Notebook.PageTab>
        <GtkBox orientation={Gtk.Orientation.HORIZONTAL} spacing={4}>
            <GtkImage iconName="folder-symbolic" />
            <GtkLabel label="Files" />
        </GtkBox>
    </Notebook.PageTab>
    <Content />
</Notebook.Page>
```

### GtkPaned
Resizable split with draggable divider. **Requires Slot components.**

```tsx
<GtkPaned orientation={Gtk.Orientation.HORIZONTAL} position={280} shrinkStartChild={false}>
    <Slot for={GtkPaned} id="startChild"><Sidebar /></Slot>
    <Slot for={GtkPaned} id="endChild"><MainContent /></Slot>
</GtkPaned>
```

### GtkOverlay
Stack widgets on top of each other. First child is base layer, additional children need `OverlayChild` wrapper.

```tsx
<GtkOverlay>
    <GtkButton label="Notifications" />
    <OverlayChild>
        <GtkLabel label="3" cssClasses={["badge"]} halign={Gtk.Align.END} valign={Gtk.Align.START} />
    </OverlayChild>
</GtkOverlay>
```

### GtkScrolledWindow
Scrollable container.

```tsx
<GtkScrolledWindow vexpand hscrollbarPolicy={Gtk.PolicyType.NEVER}>
    <Content />
</GtkScrolledWindow>
```

---

## Virtual Lists

All virtual list widgets use `ListItem` children and a `renderItem` function.

### ListView
High-performance scrollable list with selection.

```tsx
<ListView<Item>
    vexpand
    selected={selectedId ? [selectedId] : []}
    selectionMode={Gtk.SelectionMode.SINGLE}
    onSelectionChanged={(ids) => setSelectedId(ids[0])}
    renderItem={(item) => <GtkLabel label={item?.name ?? ""} />}
>
    {items.map(item => <ListItem key={item.id} id={item.id} value={item} />)}
</ListView>
```

### GridView
Grid-based virtual scrolling.

```tsx
<GridView<Item>
    minColumns={2}
    maxColumns={4}
    renderItem={(item) => (
        <GtkBox orientation={Gtk.Orientation.VERTICAL}>
            <GtkImage iconName={item?.icon ?? "image-missing"} />
            <GtkLabel label={item?.name ?? ""} />
        </GtkBox>
    )}
>
    {items.map(item => <ListItem key={item.id} id={item.id} value={item} />)}
</GridView>
```

### GtkColumnView
Table with sortable columns.

```tsx
<GtkColumnView sortColumn="name" sortOrder={Gtk.SortType.ASCENDING} onSortChange={handleSort}>
    <ColumnViewColumn<Item>
        title="Name"
        id="name"
        expand
        resizable
        sortable
        renderCell={(item) => <GtkLabel label={item?.name ?? ""} />}
    />
    <ColumnViewColumn<Item>
        title="Size"
        id="size"
        fixedWidth={100}
        renderCell={(item) => <GtkLabel label={item?.size ?? ""} />}
    />
    {items.map(item => <ListItem key={item.id} id={item.id} value={item} />)}
</GtkColumnView>
```

### GtkDropDown
Selection dropdown.

```tsx
<GtkDropDown selectedId={selectedId} onSelectionChanged={setSelectedId}>
    {options.map(opt => <SimpleListItem key={opt.id} id={opt.id} value={opt.label} />)}
</GtkDropDown>
```

---

## Inputs

### GtkEntry
Single-line text input. **Requires two-way binding.**

```tsx
const [text, setText] = useState("");
<GtkEntry text={text} onChanged={(e) => setText(e.getText())} placeholderText="Enter text..." />
```

### GtkToggleButton
Toggle button. Auto-prevents signal feedback loops.

```tsx
<GtkToggleButton active={isActive} onToggled={() => setIsActive(!isActive)} label="Toggle" />
```

### GtkCheckButton
Checkbox.

```tsx
<GtkCheckButton active={checked} onToggled={() => setChecked(!checked)} label="Option" />
```

### GtkSwitch
On/off switch.

```tsx
<GtkSwitch active={enabled} onStateSet={() => { setEnabled(!enabled); return true; }} />
```

### GtkSpinButton
Numeric input with increment/decrement.

```tsx
<GtkSpinButton value={count} onValueChanged={(sb) => setCount(sb.getValue())} />
```

---

## Display

### GtkLabel
```tsx
<GtkLabel label="Text" halign={Gtk.Align.START} wrap useMarkup />
```

### GtkButton
```tsx
<GtkButton label="Click" onClicked={handleClick} iconName="document-new-symbolic" />
```

### GtkImage
```tsx
<GtkImage iconName="folder-symbolic" pixelSize={48} />
```

---

## Header & Action Bars

### GtkHeaderBar
Title bar with packed widgets. Use `Pack.Start`, `Pack.End`, and `Slot` for titleWidget.

```tsx
<GtkHeaderBar>
    <Pack.Start><GtkButton iconName="go-previous-symbolic" /></Pack.Start>
    <Slot for={GtkHeaderBar} id="titleWidget">
        <GtkLabel label="Title" cssClasses={["title"]} />
    </Slot>
    <Pack.End><GtkMenuButton iconName="open-menu-symbolic" /></Pack.End>
</GtkHeaderBar>
```

### GtkActionBar
Bottom action bar.

```tsx
<GtkActionBar>
    <Pack.Start><GtkButton label="Cancel" /></Pack.Start>
    <Pack.End><GtkButton label="Save" cssClasses={["suggested-action"]} /></Pack.End>
</GtkActionBar>
```

---

## Menus

### GtkPopoverMenu with GtkMenuButton

```tsx
<GtkMenuButton iconName="open-menu-symbolic">
    <Slot for={GtkMenuButton} id="popover">
        <GtkPopoverMenu>
            <Menu.Section>
                <Menu.Item id="new" label="New" onActivate={handleNew} accels="<Control>n" />
                <Menu.Item id="open" label="Open" onActivate={handleOpen} />
            </Menu.Section>
            <Menu.Section>
                <Menu.Submenu label="Export">
                    <Menu.Item id="pdf" label="PDF" onActivate={exportPdf} />
                    <Menu.Item id="csv" label="CSV" onActivate={exportCsv} />
                </Menu.Submenu>
            </Menu.Section>
            <Menu.Section>
                <Menu.Item id="quit" label="Quit" onActivate={quit} accels="<Control>q" />
            </Menu.Section>
        </GtkPopoverMenu>
    </Slot>
</GtkMenuButton>
```

**Menu.Item props:** `id` (required), `label`, `onActivate`, `accels` (e.g., `"<Control>n"`)

---

## Windows

### GtkApplicationWindow

```tsx
<GtkApplicationWindow
    title="App"
    defaultWidth={800}
    defaultHeight={600}
    onCloseRequest={quit}
>
    <Content />
</GtkApplicationWindow>
```

Custom titlebar:
```tsx
<GtkApplicationWindow ...>
    <Slot for={GtkWindow} id="titlebar">
        <GtkHeaderBar />
    </Slot>
    <Content />
</GtkApplicationWindow>
```

---

## Adwaita (Libadwaita)

Import: `import * as Adw from "@gtkx/ffi/adw";`

### AdwApplicationWindow + AdwToolbarView
Modern app structure.

```tsx
<AdwApplicationWindow title="App" defaultWidth={800} defaultHeight={600} onCloseRequest={quit}>
    <AdwToolbarView>
        <Toolbar.Top>
            <AdwHeaderBar>
                <Slot for={AdwHeaderBar} id="titleWidget">
                    <AdwWindowTitle title="App" subtitle="Description" />
                </Slot>
            </AdwHeaderBar>
        </Toolbar.Top>
        <MainContent />
        <Toolbar.Bottom>
            <GtkActionBar />
        </Toolbar.Bottom>
    </AdwToolbarView>
</AdwApplicationWindow>
```

### AdwStatusPage
Welcome, error, or empty state.

```tsx
<AdwStatusPage iconName="applications-system-symbolic" title="Welcome" description="Get started" vexpand>
    <GtkButton label="Start" cssClasses={["suggested-action", "pill"]} halign={Gtk.Align.CENTER} />
</AdwStatusPage>
```

### AdwBanner
Dismissable notification.

```tsx
<AdwBanner title="Update available" buttonLabel="Dismiss" revealed={show} onButtonClicked={() => setShow(false)} />
```

### AdwPreferencesPage / AdwPreferencesGroup
Settings UI.

```tsx
<AdwPreferencesPage title="Settings">
    <AdwPreferencesGroup title="Appearance" description="Customize look">
        <AdwSwitchRow title="Dark Mode" active={dark} onActivated={() => setDark(!dark)} />
        <AdwActionRow title="Theme" subtitle="Select color">
            <Slot for={AdwActionRow} id="activatableWidget">
                <GtkImage iconName="go-next-symbolic" valign={Gtk.Align.CENTER} />
            </Slot>
        </AdwActionRow>
    </AdwPreferencesGroup>
</AdwPreferencesPage>
```

### AdwExpanderRow
Expandable settings row.

```tsx
<AdwExpanderRow title="Advanced" subtitle="More options">
    <AdwSwitchRow title="Option 1" active />
    <AdwSwitchRow title="Option 2" active={false} />
</AdwExpanderRow>
```

### AdwEntryRow / AdwPasswordEntryRow
Input in list row.

```tsx
<AdwEntryRow title="Username" text={username} onChanged={(e) => setUsername(e.getText())} />
<AdwPasswordEntryRow title="Password" />
```

### Other Adwaita Widgets

| Widget | Description |
|--------|-------------|
| `AdwClamp` | Limits content width (`maximumSize={600}`) |
| `AdwAvatar` | User avatar (`size={48} text="Name" showInitials`) |
| `AdwSpinner` | Loading indicator |
| `AdwWindowTitle` | Title + subtitle for header bars |
| `AdwButtonRow` | Button styled as list row |
